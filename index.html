<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Form - Kumaran Travels</title>
    <link rel="shortcut icon" href="icon.ico" type="image/x-icon">
    <!-- css -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="index.js"></script>
</head>

<body>
    <main onmouseover="preview()">
        <form id="regForm" name="submit-to-google-sheet">
            <center>
                <img class="logo" src="images/logo.png" alt="kumaran_logo">
            </center>
            <p id="demo"></p>
            <!-- One "tab" for each step in the form: -->
            <div class="tab">
                <h1>Admin Form to add new package</h1>
                Select Tour Type:
                <div class="row selection">
                    <label class="col">
                        <input class="with-gap" name="Tour Type" value="Domestic Train Tour" type="radio" checked />
                        <span>Domestic Tour</span>
                    </label>
                    <label class="col">
                        <input class="with-gap" name="Tour Type" value="Special Tour" type="radio" />
                        <span>Special Tour</span>
                    </label>
                    <label class="col">
                        <input class="with-gap" name="Tour Type" value="Foreign Tour" type="radio" />
                        <span>Foreign Tour</span>
                    </label>
                </div>
                Tour ID:
                <p><input placeholder="Enter Tour ID" required oninput="this.className = ''" id="tour_id" type="text"
                        name="Tour Id" required></p>
                <p class=""></p>
                Package Title:
                <p><input placeholder="Enter Package Title" required oninput="this.className = ''" id="title"
                        type="text" name="Package Title" required></p>
                Image URL:
                <p><input placeholder="Enter Image Url" oninput="this.className = ''" id="url" name="Package Image"
                        required type="url"></p>
                Days:
                <p><input placeholder="No. Of Days & Nights" oninput="this.className = ''" id="days" type="text"
                        name="Days" required></p>
                Places:
                <p><input placeholder="Places" oninput="this.className = ''" id="places" type="text" name="Places"
                        required>
                </p>

            </div>
            <div class="tab">
                <h1>Admin Form to add new package</h1>
                <p id="demo1"></p>
                About Place:
                <p> <textarea id="about" placeholder="Add description about the place" oninput="this.className = ''"
                        rows="4" name="About Place" required></textarea>
                </p>
                Itinerary (Tour Plans):
                <div class="rich-btn">
                    <div id="bold" title="Bold"><i class="fas fa-bold"></i></div>
                    <div id="italic" title="Italic"><i class="fas fa-italic"></i></div>
                    <div id="underline" title="Underline"><i class="fas fa-underline"></i></div>
                </div>
                <p> <textarea id="Itinerary" placeholder="Add Tour Plans (Day1, Day2, Day3 etc..)"
                        oninput="this.className = ''" rows="8" name="Itinerary" required>
<!-- Dummy Content -->
<b>Day 1:</b>Lorem ipsum dolor sit amet consectetur adipisicing elit. <br>
<b>Day 2:</b> consectetur adipisicing elit. Dolore, voluptates dicta? <br>
                    </textarea>
                </p>
                <script>
                    $(function () {
                        $('#bold').on('click', function () {
                            var text = $('#Itinerary');
                            text.val(text.val() + '<b> Bold_text </b>');
                        });
                        $('#italic').on('click', function () {
                            var text = $('#Itinerary');
                            text.val(text.val() + '<i> Italic_text </i>');
                        });
                        $('#underline').on('click', function () {
                            var text = $('#Itinerary');
                            text.val(text.val() + '<u> Underlined_text </u>');
                        });
                    });
                </script>
            </div>

            <div class="tab">
                <h1>Admin Form to add new package</h1>
                Admin Name:
                <p><input placeholder="Enter Your Name" oninput="this.className = ''" id="name" type="text"
                        name="Admin Name" required>
                </p>
                Package Price:
                <p><input placeholder="Enter Package Price" oninput="this.className = ''" id="price" type="text"
                        name="Price" required>
                </p>
                What we provide:
                <div class="row selection">
                    <label class="col">
                        <input class="with-gap" name="Providing" id="Food"
                            value="<p><i class='fas fa-utensils'></i><span>Food</span></p>" type="checkbox" checked />
                        <span>Food</span>
                    </label>
                    <label class="col">
                        <input class="with-gap" name="Providing" id="Accomodation"
                            value="<p><i class='fas fa-bed'></i><span>Accomodation</span></p>" type="checkbox" />
                        <span>Accomodation</span>
                    </label>
                    <label class="col">
                        <input class="with-gap" name="Providing" id="Transportation"
                            value="<p><i class='fas fa-plane'></i><span>Transportation</span></p>" type="checkbox" />
                        <span>Transportation</span>
                    </label>
                    <label class="col">
                        <input class="with-gap" name="Providing" id="SightSeeing"
                            value="<p><i class='fas fa-map-marker-alt'></i><span>Sight Seeing</span></p>"
                            type="checkbox" />
                        <span>Sight Seeing</span>
                    </label>
                    <label class="col">
                        <input class="with-gap" name="Providing" id="Transfers"
                            value="<p><i class='fas fa-bus-alt'></i><span>Transfers</span></p>" type="checkbox" />
                        <span>Transfers</span>
                    </label>
                </div>
                <p><input name="Providings" type="text" id="provide" hidden readonly></p>
            </div>


            <div style="overflow:auto;">
                <div style="float:right;">
                    <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                    <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
                    <button type="submit" id="submitBtn" name="action">Submit</button>
                </div>
            </div>

            <!-- Circles which indicates the steps of the form: -->
            <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
            </div>
        </form>

        <div class="preview">
            <h1>Preview</h1>
            <!-- modal -->
            <div class="modal-content">
                <div>
                    <h2 class="modal-title" id="titlePreview">Title
                    </h2>
                </div>
                <div class="modal-body">
                    <img id="imgPreview" src="" alt="tour img here">
                    <h5><i class="fas fa-suitcase-rolling"></i> Overview :</h5>
                    <p><b>Days :</b> <span id="daysPreview"></span></p>
                    <p><b>Places :</b> <span id="placesPreview"></span></p>
                    <p><b>Price :</b> <span id="pricePreview"></span></p>
                    <!-- <hr> -->
                    <div id="whatwe">
                    </div>
                    <hr>
                    <h5><i class="fas fa-map-marker-alt"></i> About This Place :</h5>
                    <p id="aboutPreview">
                        <!-- The Kashi Vishwanath Temple is a famous Hindu temple dedicated to Lord Shiva.
                        It is located in Vishwanath Gali of Varanasi, Uttar Pradesh in India. The temple
                        stands on the western bank of the holy river Ganga, and is one of the twelve
                        Jyotirlingas, the holiest of Shiva temples. -->
                    </p>
                    <hr>
                    <h5><i class="fas fa-bus-alt"></i> Itinerary :</h5>
                    <p id="planPreview">
                        <!-- <b>Day 1:</b>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore, voluptates
                        dicta? Totam eligendi autem dolorum modi, nulla nostrum fugiat tenetur
                        consequatur quisquam tempora vel nisi nobis, assumenda sequi iste neque?<br>
                        <b>Day 2:</b>
                        consectetur adipisicing elit. Dolore, voluptates
                        dicta? Totam eligendi autem dolorum modi, nulla nostrum fugiat tenetur
                        consequatur quisquam tempora vel nisi nobis, assumenda sequi iste neque?<br>
                        <b>Day 3:</b>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore, voluptates
                        dicta? Totam eligendi autem dolorum modi, nulla nostrum fugiat tenetur
                        consequatur quisquam tempora vel nisi<br>
                        <b>Day 4:</b>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore, voluptates
                        dicta? Totam eligendi nostrum fugiat tenetur
                        consequatur quisquam tempora vel nisi nobis, assumenda sequi iste <br> -->
                    </p>
                </div>
                <div style="overflow:auto;">
                    <div style="float:right;"><em>Posted by <span id="namePreview"></span> </em>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Form Type Package Title Package Image Days Places Content Timestamp -->
    <script>
        const scriptURL =
            'https://script.google.com/macros/s/AKfycbyK3Gqm51f549f0N90xjv4kkuxVjYOuUbqV-sWROOYQqQXvNpx3byHbwAE9dcVKfpPH/exec'
        const form = document.forms['submit-to-google-sheet']

        form.addEventListener('submit', e => {
            e.preventDefault()
            fetch(scriptURL, {
                    method: 'POST',
                    body: new FormData(form)
                })
                .then(response => {
                    $('form').html(
                        "<center><blockquote class='green-text'>Package added Successfully...</blockquote><button class='addBtn' onClick='window.location.reload()'';><i class='fas fa-plus'></i> Add New</button></center>"
                    );
                    console.log('Success!', response);
                    form.reset();
                })
                .catch(error => console.error('Error!', error.message))
        })
    </script>
    <!-- tabs -->
    <script>
        var currentTab = 0; // Current tab is set to be the first tab (0)
        showTab(currentTab); // Display the current tab

        function showTab(n) {
            // This function will display the specified tab of the form...
            var x = document.getElementsByClassName("tab");
            x[n].style.display = "block";
            //... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
                document.getElementById("nextBtn").style.display = "inline";

            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                // document.getElementById("nextBtn").innerHTML = "Submit";
                document.getElementById("nextBtn").style.display = "none";
                document.getElementById("prevBtn").style.display = "inline";
                document.getElementById("submitBtn").style.display = "inline";

            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }
            if (n == (x.length + 1)) {
                // document.getElementById("nextBtn").innerHTML = "Submit";
                document.getElementById("nextBtn").style.display = "none";
                document.getElementById("prevBtn").style.display = "inline";
                document.getElementById("submitBtn").style.display = "inline";

            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }
            //... and run a function that will display the correct step indicator:
            fixStepIndicator(n)
        }

        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form...
            if (currentTab >= x.length) {
                // ... the form gets submitted:
                document.getElementById("regForm").submit();
                return false;
            }
            // Otherwise, display the correct tab:
            showTab(currentTab);
        }

        function validateForm() {
            // This function deals with validation of the form fields
            var x, y, i, valid = true;
            x = document.getElementsByClassName("tab");
            y = x[currentTab].querySelectorAll("input, textarea");
            // A loop that checks every input field in the current tab:
            for (i = 0; i < y.length; i++) {
                // If a field is empty...
                if (y[i].value == "") {
                    // add an "invalid" class to the field:
                    y[i].className += "invalid";
                    text = "Please fill out all required fields.";
                    document.getElementById("demo").innerHTML = text;
                    // document.getElementById("demo1").innerHTML = text;
                    setTimeout(function () {
                        document.getElementById("demo").innerHTML = "";
                    }, 3000);
                    // setTimeout(function () {
                    //     document.getElementById("demo1").innerHTML = "";
                    // }, 3000);

                    // and set the current valid status to false
                    valid = false;
                } else {
                    // document.getElementById("demo").innerHTML = text;
                    // document.getElementById("demo1").innerHTML = 'text';
                }
            }
            // If the valid status is true, mark the step as finished and valid:
            if (valid) {
                document.getElementsByClassName("step")[currentTab].className += " finish";
            }
            return valid; // return the valid status
        }

        function fixStepIndicator(n) {
            // This function removes the "active" class of all steps...
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].className = x[i].className.replace(" active", "");
            }
            //... and adds the "active" class on the current step:
            x[n].className += " active";
        }
    </script>
    <script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"
        integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous">
    </script>
</body>

</html>